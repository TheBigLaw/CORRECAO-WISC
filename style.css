@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

:root{
  --bg:#e9f2ff;
  --card:#ffffff;
  --blue:#1e88e5;
  --blueDark:#0d47a1;
  --text:#16202b;
  --muted:#5c6b7a;
  --border:#d7e0ea;
  --shadow: 0 14px 34px rgba(0,0,0,.10);
  --radius: 18px;
}

*{ box-sizing:border-box; }

body{
  margin:0;
  font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight: 300;
  color: var(--text);
  background: var(--bg);
}

/* Header */
.app-header{
  position: fixed;
  top:0; left:0; right:0;
  height: 104px;
  background: var(--blueDark);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index: 999;
  box-shadow: 0 10px 22px rgba(0,0,0,.22);
}

.app-header .logo-wrap{
  display:flex;
  align-items:center;
  justify-content:center;
  width: 100%;
  pointer-events:none;
}

.app-header .logo{
  height: 56px;
  object-fit: contain;
  display:block;
}

.back-btn{
  position:absolute;
  left: 22px;
  top: 50%;
  transform: translateY(-50%);
  padding: 10px 14px;
  border: 1px solid rgba(255,255,255,.25);
  background: rgba(255,255,255,.12);
  color:#fff;
  border-radius: 12px;
  cursor:pointer;
  font-weight: 600;
  white-space: nowrap;
}
.back-btn:hover{ background: rgba(255,255,255,.18); }

.exit-btn{
  position:absolute;
  right: 22px;
  top: 50%;
  transform: translateY(-50%);
  padding: 10px 14px;
  border: 1px solid rgba(255,255,255,.25);
  background: rgba(255,255,255,.12);
  color:#fff;
  border-radius: 12px;
  cursor:pointer;
  font-weight: 600;
  white-space: nowrap;
}
.exit-btn:hover{ background: rgba(255,255,255,.18); }

/* Layout */
.main{
  max-width: 980px;
  margin: 132px auto 64px;
  padding: 0 18px;
}

.card{
  background: var(--card);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 26px;
  margin: 18px auto;
}

/* espaçamento padrão dentro de cards */
.card > * + *{
  margin-top: 12px;
}

h1,h2,h3{
  margin: 0;
  font-weight: 700;
  letter-spacing: -0.2px;
}
h1{ font-size: 20px; color: var(--blueDark); }
h2{ font-size: 16px; color: var(--blueDark); }
h3{ font-size: 13px; color: var(--blueDark); }

.muted{
  color: var(--muted);
  font-size: 12px;
}

.form-grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 18px;
  align-items: end;
}

label{
  display:block;
  font-size: 13px;
  font-weight: 600;
  color: var(--blueDark);
  margin-bottom: 6px;
}

input, select{
  width: 100%;
  padding: 11px 12px;
  border-radius: 12px;
  border: 1px solid var(--border);
  font-size: 14px;
  font-weight: 300;
  background: #fff;
  outline: none;
}
input:focus, select:focus{
  border-color: rgba(30,136,229,.55);
  box-shadow: 0 0 0 4px rgba(30,136,229,.10);
}

.table{
  width:100%;
  border-collapse: collapse;
  font-size: 12px;
  margin-top: 8px;
}
.table th, .table td{
  border-bottom: 1px solid var(--border);
  padding: 7px 7px;
  text-align:left;
}
.table th{
  color: var(--blueDark);
  font-weight: 700;
  background: rgba(30,136,229,.06);
}

.table-compact{
  font-size: 11px;
}
.table-compact th, .table-compact td{
  padding: 6px 6px;
}

.actions{
  display:flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 14px;
}

button{
  padding: 12px 14px;
  border-radius: 14px;
  border: none;
  cursor:pointer;
  font-weight: 700;
  font-size: 14px;
}

.btn-primary{
  background: var(--blue);
  color:#fff;
}
.btn-primary:hover{ filter: brightness(.95); }

.btn-outline{
  background: transparent;
  border: 1px solid rgba(13,71,161,.25);
  color: var(--blueDark);
}
.btn-outline:hover{ background: rgba(13,71,161,.06); }

/* Login */
.login-page{
  background: linear-gradient(140deg, var(--blueDark), #1565c0);
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 18px;
}

.login-card{
  width: 100%;
  max-width: 420px;
  background: #fff;
  border-radius: 22px;
  box-shadow: 0 26px 60px rgba(0,0,0,.30);
  padding: 34px 28px;
}

.login-card .logo{
  height: 74px;
  margin: 0 auto 16px;
  display:block;
}

.login-card .muted{
  text-align:center;
  margin: 0 0 14px;
}

.login-form{
  display:flex;
  flex-direction: column;
  gap: 12px;
}

.login-form .btn-primary{
  width: 100%;
  margin-top: 6px;
}

.error{
  color: #c62828;
  font-size: 13px;
  margin-top: 10px;
  min-height: 18px;
  text-align:center;
}

/* ================= RELATÓRIO (PDF / HTML) ================= */

.report{ 
  margin-top: 0;
  background:#fff;
  border-radius: 18px;
  overflow: hidden;
  border: 1px solid rgba(13,71,161,.14);
}

/* A4 friendly */
#relatorio .report{
  max-width: 190mm;
  margin-left: auto;
  margin-right: auto;
}

.report-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:14px;
  padding: 12px 14px;
  border-bottom: 2px solid rgba(13,71,161,.14);
  background: linear-gradient(180deg, rgba(227,242,253,.9), rgba(227,242,253,.55));
}

.report-brand{
  display:flex;
  align-items:center;
  gap:10px;
  min-width: 0;
}

.report-title{ 
  display:flex;
  flex-direction:column;
  gap:2px;
  min-width: 0;
}

.report-title .t1{ 
  font-weight: 800;
  color: var(--blueDark);
  font-size: 14px;
  letter-spacing: .1px;
  line-height: 1.1;
}
.report-title .t2{ 
  color: rgba(0,0,0,.55);
  font-size: 10.5px;
  line-height: 1.2;
}

.report-meta{ 
  text-align:right;
  min-width: 160px;
}

.badge{
  display:inline-block;
  padding: 4px 10px;
  border-radius: 999px;
  background: rgba(30,136,229,.14);
  color: var(--blueDark);
  font-weight: 800;
  font-size: 11px;
  border: 1px solid rgba(13,71,161,.16);
}

.report-logo{
  width: 34px;
  height: 34px;
  object-fit: contain;
}

.report-logo-bottom{
  width: 30px;
  height: 30px;
}

/* Seções do relatório */
.report .section{
  margin: 10px 10px 0;
  padding: 10px 10px;
  border-radius: 16px;
  background: rgba(227,242,253,.65);
  border: 1px solid rgba(13,71,161,.10);
}

.report .section:last-of-type{
  margin-bottom: 10px;
}

.report-info{
  background: rgba(227,242,253,.45);
}

.info-grid{
  display:grid;
  grid-template-columns: 1.4fr 1fr 1fr;
  gap: 8px 10px;
}
.info-grid .k{ color: var(--blueDark); font-weight: 800; font-size: 11px; }
.info-grid .v{ color: #111; font-weight: 600; font-size: 11px; }

.hint{
  margin: 7px 0 0;
  font-size: 10.8px;
}

/* ======= Layout 2 colunas dentro do relatório ======= */
.two-col{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  padding: 0 10px 10px;
}

/* Blocos que NÃO podem quebrar no PDF */
.report-block{
  break-inside: avoid;
  page-break-inside: avoid;
}

/* Containers */
.canvas-wrap{
  background: #fff;
  border: 1px solid rgba(13,71,161,.16);
  border-radius: 16px;
  padding: 8px;
}

/* Gráficos mais compactos (como você pediu) */
.perfil-canvas{ height: 200px; }
.idx-canvas{ height: 150px; }

.matrix-card{
  background: #fff;
  border: 1px solid rgba(13,71,161,.16);
  border-radius: 16px;
  padding: 8px;
  box-shadow: none;
  overflow: visible;
}

/* Perfil (tabela compacta) */
.perfil-card{
  border: 1px solid rgba(13,71,161,.16);
  border-radius: 16px;
  padding: 8px;
  background: rgba(255,255,255,.65);
}

.perfil-table{
  width:100%;
  border-collapse: separate;
  border-spacing: 0;
  margin-bottom: 8px;
  table-layout: fixed;
}

.perfil-table th, .perfil-table td{
  border: 1px solid rgba(13,71,161,.16);
  padding: 5px 4px;
  text-align:center;
  font-size: 10.5px;
  white-space: normal;
  overflow-wrap: anywhere;
}

.perfil-table thead th.perfil-group{
  background: rgba(13,71,161,.10);
  font-weight: 900;
  color: var(--blueDark);
}

.perfil-table thead th.perfil-code{
  background: rgba(13,71,161,.06);
  font-weight: 900;
  color: var(--blueDark);
}

.perfil-table td.perfil-val{
  background:#fff;
  font-weight: 900;
  color: var(--blueDark);
}

/* Matriz (PB→PP + contribuição) */
.wisc-matrix{
  width:100%;
  border-collapse: separate;
  border-spacing: 0;
  table-layout: fixed;
}

.wisc-matrix th, .wisc-matrix td{
  border: 1px solid rgba(13,71,161,.16);
  padding: 5px 5px;
  vertical-align: middle;
  font-size: 10px;
  white-space: normal;
  overflow-wrap: anywhere;
}

.wisc-matrix thead th{
  background: rgba(13,71,161,.08);
  color: var(--blueDark);
  font-weight: 900;
}

.wisc-matrix .idx{ text-align:center; width: 42px; }
.wisc-matrix .col-sub{ width: 42%; }
.wisc-matrix .col-pb{ width: 8%; text-align:center; }
.wisc-matrix .col-pp{ width: 10%; text-align:center; }

.wisc-matrix td.fill{ background: rgba(13,71,161,.10); }
.wisc-matrix td.empty{ background: rgba(13,71,161,.05); }

.wisc-matrix .pill{
  display:inline-block;
  min-width: 26px;
  padding: 3px 6px;
  border-radius: 999px;
  background: var(--blueDark);
  color:#fff;
  font-weight: 900;
  font-size: 10px;
}

.wisc-matrix .pill.sup{
  background: rgba(13,71,161,.78);
}

.wisc-matrix tfoot td{
  font-weight: 900;
  background: rgba(13,71,161,.08);
  text-align:center;
}

.wisc-matrix tfoot .sum-label{
  text-align:left;
  color: var(--blueDark);
}

/* Rodapé */
.report-footer{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding: 10px 14px 12px;
  border-top: 2px solid rgba(13,71,161,.14);
  background: #fff;
}

/* Evitar quebras no meio de gráficos/tabelas */
.no-break{
  break-inside:avoid;
  page-break-inside:avoid;
}

/* Responsivo: no celular vira 1 coluna */
@media (max-width: 900px){
  .two-col{
    grid-template-columns: 1fr;
  }
}

/* Melhor comportamento de impressão/PDF */
@media print{
  body{ background:#fff !important; }
  .app-header, .back-btn, .exit-btn{ display:none !important; }
  .main{ margin: 0 !important; padding: 0 !important; }
  .card{ box-shadow:none !important; border:none !important; margin: 0 !important; padding: 0 !important; }
  #relatorio .report{ max-width: none !important; border:none !important; }

  .two-col{
    grid-template-columns: 1fr 1fr !important;
    gap: 10px !important;
  }

  canvas, .canvas-wrap, .matrix-card, .report-block, .section{
    break-inside: avoid !important;
    page-break-inside: avoid !important;
  }
}
